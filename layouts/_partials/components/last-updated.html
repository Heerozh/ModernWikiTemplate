{{- if site.Params.displayUpdatedDate -}}
  {{- with .GitInfo -}}

    {{- $authorName := .AuthorName -}}
    {{- $authorEmail := .AuthorEmail -}}
    {{- $date := .AuthorDate -}}
    {{- $subject := .Subject -}}
    {{- $hash := .Hash -}}
    {{- $shortHash := .AbbreviatedHash -}}
    {{- $seenEmails := dict -}}
    {{- $seenEmails = merge $seenEmails (dict .AuthorEmail true) -}}
    
    {{- /* 生成avatar URL */ -}}
    {{- $emailHash := md5 (lower $authorEmail) -}}
    {{- $avatarUrl := printf "https://www.weavatar.com/avatar/%s?s=40&d=identicon" $emailHash -}}

    <div class="hx:mt-12 hx:mb-8 hx:border-t hx:border-gray-200 hx:dark:border-gray-700 hx:pt-6">
      <!-- 最后编辑信息 -->
      <div class="hx:flex hx:items-center hx:gap-2 hx:text-sm hx:text-gray-600 hx:dark:text-gray-400 hx:mb-4">
        <div class="">最后修改</div>
        <img src="{{ $avatarUrl }}" alt="{{ $authorName }}" class="hx:w-10 hx:h-10 hx:rounded-full" />
        <div class="hx:flex hx:flex-wrap hx:items-center hx:gap-2">
          <span class="hx:font-medium hx:text-gray-700 hx:dark:text-gray-300">{{ $authorName }}</span>
          <span>·</span>
          <time datetime="{{ $date.Format "2006-01-02T15:04:05Z07:00" }}" class="hx:whitespace-nowrap">
            {{ partial "utils/format-date" $date }}
          </time>
          <span>·</span>
          <span class="hx:max-w-md hx:truncate" title="{{ $subject }}">{{ $subject }}</span>
          <span>·</span>
          <code class="hx:text-xs hx:dark:bg-gray-800 hx:px-2 hx:py-1 hx:rounded">{{ $shortHash }}</code>
        </div>
      </div>
      
      <!-- 贡献者说明 -->
      <div class="hx:text-xs hx:text-gray-500 hx:dark:text-gray-500">
        <div class="hx:mb-2">其他贡献者</div>
        <div class="hx:flex hx:flex-wrap hx:gap-1">
          {{- $count := 0 -}}
          {{- range .Ancestors | first 10 -}} 
            {{- if not (index $seenEmails .AuthorEmail) -}}
              {{- $seenEmails = merge $seenEmails (dict .AuthorEmail true) -}}
              {{- $count = add $count 1 -}}
              {{- /* 生成avatar URL */ -}}
              {{- $emailHash := md5 (lower .AuthorEmail) -}}
              {{- $avatarUrl := printf "https://www.weavatar.com/avatar/%s?s=40&d=identicon" $emailHash -}}
              <div class="hx:group hx:relative">
                <img src="{{ $avatarUrl }}" title="{{ .AuthorName }}" 
                    class="hx:w-7 hx:h-7 hx:rounded-full hx:border hx:border-gray-200 hx:dark:border-gray-600" />
              </div>
            {{- end -}}
          {{- end -}}
          {{- if eq $count 0 -}}
            <div class="hx:group hx:relative hx:mt-1">暂无</div>
          {{- else -}}
            <div class="hx:group hx:relative hx:mt-1">...</div>
          {{- end -}}
        </div>
      </div>
    </div>
  {{- else -}}
    {{- /* 如果没有 GitInfo，显示 Lastmod */ -}}
    {{- with .Lastmod -}}
      {{ $datetime := (time.Format "2006-01-02T15:04:05.000Z" .) }}
      <div class="hx:mt-12 hx:mb-8 hx:block hx:text-xs hx:text-gray-500 hx:ltr:text-right hx:rtl:text-left hx:dark:text-gray-400">
        {{ (T "lastUpdated") | default "Last updated on" }} <time datetime="{{ $datetime }}">{{ partial "utils/format-date" . }}</time>
      </div>
    {{- else -}}
      <div class="hx:mt-16"></div>
    {{- end -}}
  {{- end -}}
{{- else -}}
  <div class="hx:mt-16"></div>
{{- end -}}